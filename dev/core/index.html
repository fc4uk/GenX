<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Core · GenX</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://genxproject.github.io/GenX/core/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">GenX</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Welcome Page</a></li><li><span class="tocitem">Model Concept and Overview</span><ul><li><a class="tocitem" href="../model_introduction/">Model Introduction</a></li><li><a class="tocitem" href="../model_notation/">Notation</a></li><li><a class="tocitem" href="../objective_function/">Objective Function</a></li><li><a class="tocitem" href="../power_balance/">Power Balance</a></li></ul></li><li><span class="tocitem">Model Function Reference</span><ul><li class="is-active"><a class="tocitem" href>Core</a><ul class="internal"><li><a class="tocitem" href="#Discharge"><span>Discharge</span></a></li><li><a class="tocitem" href="#Non-served-Energy"><span>Non-served Energy</span></a></li><li><a class="tocitem" href="#Reserves"><span>Reserves</span></a></li><li><a class="tocitem" href="#Transmission"><span>Transmission</span></a></li><li><a class="tocitem" href="#Unit-Commitment"><span>Unit Commitment</span></a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2" type="checkbox"/><label class="tocitem" for="menuitem-3-2"><span class="docs-label">Resources</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../curtailable_variable_renewable/">Curtailable Variable Renewable</a></li><li><a class="tocitem" href="../flexible_demand/">Flexible Demand</a></li><li><a class="tocitem" href="../hydro_res/">Hydro</a></li><li><a class="tocitem" href="../must_run/">Must Run</a></li><li><input class="collapse-toggle" id="menuitem-3-2-5" type="checkbox"/><label class="tocitem" for="menuitem-3-2-5"><span class="docs-label">Storage</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../storage/">Storage</a></li><li><a class="tocitem" href="../investment_charge/">Investment Charge</a></li><li><a class="tocitem" href="../investment_energy/">Investment Energy</a></li><li><a class="tocitem" href="../long_duration_storage/">Long Duration Storage</a></li><li><a class="tocitem" href="../storage_all/">Storage All</a></li><li><a class="tocitem" href="../storage_asymmetric/">Storage Asymmetric</a></li><li><a class="tocitem" href="../storage_symmetric/">Storage Symmetric</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-2-6" type="checkbox"/><label class="tocitem" for="menuitem-3-2-6"><span class="docs-label">Thermal</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../thermal/">Thermal</a></li><li><a class="tocitem" href="../thermal_commit/">Thermal Commit</a></li><li><a class="tocitem" href="../thermal_no_commit/">Thermal No Commit</a></li></ul></li></ul></li><li><a class="tocitem" href="../policies/">Policies</a></li></ul></li><li><a class="tocitem" href="../methods/">Methods</a></li><li><a class="tocitem" href="../solver_configuration/">Solver Configurations</a></li><li><a class="tocitem" href="../solve_model/">Solving the Model</a></li><li><a class="tocitem" href="../additional_features/">Additional Features</a></li><li><a class="tocitem" href="../data_documentation/">Model Inputs/Outputs Documentation</a></li><li><a class="tocitem" href="../load_inputs/">GenX Inputs Functions</a></li><li><a class="tocitem" href="../write_outputs/">GenX Outputs Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Model Function Reference</a></li><li class="is-active"><a href>Core</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Core</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/GenXProject/GenX/blob/master/docs/src/core.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Core"><a class="docs-heading-anchor" href="#Core">Core</a><a id="Core-1"></a><a class="docs-heading-anchor-permalink" href="#Core" title="Permalink"></a></h1><h2 id="Discharge"><a class="docs-heading-anchor" href="#Discharge">Discharge</a><a id="Discharge-1"></a><a class="docs-heading-anchor-permalink" href="#Discharge" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GenX.discharge-Tuple{JuMP.Model,Dict}" href="#GenX.discharge-Tuple{JuMP.Model,Dict}"><code>GenX.discharge</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">discharge(EP::Model, inputs::Dict)</code></pre><p>This module defines the power decision variable <span>$\Theta_{y,t} \forall y \in \mathcal{G}, t \in \mathcal{T}$</span>, representing energy injected into the grid by resource <span>$y$</span> by at time period <span>$t$</span>.</p><p>This module additionally defines contributions to the objective function from variable costs of generation (variable O&amp;M plus fuel cost) from all resources <span>$y \in \mathcal{G}$</span> over all time periods <span>$t \in \mathcal{T}$</span>:</p><p class="math-container">\[\begin{aligned}
	Obj_{Var\_gen} =
	\sum_{y \in \mathcal{G} } \sum_{t \in \mathcal{T}}\omega_{t}\times(\pi^{VOM}_{y} + \pi^{FUEL}_{y})\times \Theta_{y,t}
\end{aligned}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d9b72ef6d96e458b3f97317ff140492c21014e6d/src/model/core/discharge/discharge.jl#L17-L31">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GenX.investment_discharge-Tuple{JuMP.Model,Dict}" href="#GenX.investment_discharge-Tuple{JuMP.Model,Dict}"><code>GenX.investment_discharge</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">investment_discharge(EP::Model, inputs::Dict)</code></pre><p>This function defines the expressions and constraints keeping track of total available power generation/discharge capacity across all resources as well as constraints on capacity retirements.</p><p>The total capacity of each resource is defined as the sum of the existing capacity plus the newly invested capacity minus any retired capacity. Note for storage resources, additional energy and charge power capacity decisions and constraints are defined in the storage module.</p><p class="math-container">\[\begin{aligned}
&amp; \Delta^{total}_{y,z} =(\overline{\Delta_{y,z}}+\Omega_{y,z}-\Delta_{y,z}) \forall y \in \mathcal{G}, z \in \mathcal{Z}
\end{aligned}\]</p><p>One cannot retire more capacity than existing capacity.</p><p class="math-container">\[\begin{aligned}
&amp;\Delta_{y,z} \leq \overline{\Delta_{y,z}}
	\hspace{4 cm}  \forall y \in \mathcal{G}, z \in \mathcal{Z}
\end{aligned}\]</p><p>For resources where <span>$\overline{\Omega_{y,z}}$</span> and <span>$\underline{\Omega_{y,z}}$</span> is defined, then we impose constraints on minimum and maximum power capacity.</p><p class="math-container">\[\begin{aligned}
&amp; \Delta^{total}_{y,z} \leq \overline{\Omega}_{y,z}
	\hspace{4 cm}  \forall y \in \mathcal{G}, z \in \mathcal{Z} \\
&amp; \Delta^{total}_{y,z}  \geq \underline{\Omega}_{y,z}
	\hspace{4 cm}  \forall y \in \mathcal{G}, z \in \mathcal{Z}
\end{aligned}\]</p><p>In addition, this function adds investment and fixed O\&amp;M related costs related to discharge/generation capacity to the objective function:</p><p class="math-container">\[\begin{aligned}
&amp; 	\sum_{y \in \mathcal{G} } \sum_{z \in \mathcal{Z}}
	\left( (\pi^{INVEST}_{y,z} \times \overline{\Omega}^{size}_{y,z} \times  \Omega_{y,z})
	+ (\pi^{FOM}_{y,z} \times \overline{\Omega}^{size}_{y,z} \times  \Delta^{total}_{y,z})\right)
\end{aligned}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d9b72ef6d96e458b3f97317ff140492c21014e6d/src/model/core/discharge/investment_discharge.jl#L17-L56">source</a></section></article><h2 id="Non-served-Energy"><a class="docs-heading-anchor" href="#Non-served-Energy">Non-served Energy</a><a id="Non-served-Energy-1"></a><a class="docs-heading-anchor-permalink" href="#Non-served-Energy" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GenX.non_served_energy-Tuple{JuMP.Model,Dict}" href="#GenX.non_served_energy-Tuple{JuMP.Model,Dict}"><code>GenX.non_served_energy</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">non_served_energy(EP::Model, inputs::Dict)</code></pre><p>This function defines the non-served energy/curtailed demand decision variable <span>$\Lambda_{s,t,z} \forall s \in \mathcal{S}, \forall t \in \mathcal{T}, z \in \mathcal{Z}$</span>, representing the total amount of demand curtailed in demand segment <span>$s$</span> at time period <span>$t$</span> in zone <span>$z$</span>. The first segment of non-served energy, <span>$s=1$</span>, is used to denote the cost of involuntary demand curtailment (e.g. emergency load shedding or rolling blackouts), specified as the value of <span>$n_{1}^{slope}$</span>. Additional segments, <span>$s \geq 2$</span> can be used to specify a segment-wise approximation of a price elastic demand curve, or segments of price-responsive curtailable loads (aka demand response). Each segment denotes a price/cost at which the segment of demand is willing to curtail consumption, <span>$n_{s}^{slope}$</span>, representing the marginal willingness to pay for electricity of this segment of demand (or opportunity cost incurred when demand is not served) and a maximum quantity of demand in this segment, <span>$n_{s}^{size}$</span>, specified as a share of demand in each zone in each time step, <span>$D_{t,z}.$</span> Note that the current implementation assumes demand segments are an equal share of hourly load in all zones.</p><p>This function defines contributions to the objective function from the cost of non-served energy/curtailed demand from all demand curtailment segments <span>$s \in \mathcal{S}$</span> over all time periods <span>$t \in \mathcal{T}$</span> and all zones <span>$z \in \mathcal{Z}$</span>:</p><p class="math-container">\[\begin{aligned}
	Obj_{NSE} =
	\sum_{s \in \mathcal{S} } \sum_{t \in \mathcal{T}} \sum_{z \in \mathcal{Z}}\omega_{t} \times n_{s}^{slope} \times \Lambda_{s,t,z}
\end{aligned}\]</p><p>Contributions to the power balance expression from non-served energy/curtailed demand from each demand segment <span>$s \in \mathcal{S}$</span> are also defined as:</p><p class="math-container">\[\begin{aligned}
	PowerBal_{NSE} =
	\sum_{s \in \mathcal{S} } \Lambda_{s,t,z}
		\hspace{4 cm}  \forall s \in \mathcal{S}, t \in \mathcal{T}
\end{aligned}\]</p><p><strong>Bounds on curtailable demand</strong></p><p>Demand curtailed in each segment of curtailable demands <span>$s \in \mathcal{S}$</span> cannot exceed maximum allowable share of demand:</p><p class="math-container">\[\begin{aligned}
	\Lambda_{s,t,z} \leq (n_{s}^{size} \times D_{t,z})
	\hspace{4 cm}  \forall s \in \mathcal{S}, t \in \mathcal{T}, z\in \mathcal{Z}
\end{aligned}\]</p><p>Additionally, total demand curtailed in each time step cannot exceed total demand:</p><p class="math-container">\[\begin{aligned}
	\sum_{s \in \mathcal{S} } \Lambda_{s,t,z} \leq D_{t,z}
	\hspace{4 cm}  \forall t \in \mathcal{T}, z\in \mathcal{Z}
\end{aligned}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d9b72ef6d96e458b3f97317ff140492c21014e6d/src/model/core/non_served_energy.jl#L17-L61">source</a></section></article><h2 id="Reserves"><a class="docs-heading-anchor" href="#Reserves">Reserves</a><a id="Reserves-1"></a><a class="docs-heading-anchor-permalink" href="#Reserves" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GenX.load_reserves-Tuple{Dict,AbstractString,AbstractString,Dict}" href="#GenX.load_reserves-Tuple{Dict,AbstractString,AbstractString,Dict}"><code>GenX.load_reserves</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">load_reserves(setup::Dict,path::AbstractString,sep::AbstractString, inputs_res::Dict)</code></pre><p>Function for reading input parameters related to frequency regulation and operating reserve requirements</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d9b72ef6d96e458b3f97317ff140492c21014e6d/src/load_inputs/load_reserves.jl#L17-L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GenX.reserves-Tuple{JuMP.Model,Dict,Int64}" href="#GenX.reserves-Tuple{JuMP.Model,Dict,Int64}"><code>GenX.reserves</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">reserves(EP::Model, inputs::Dict, UCommit::Int)</code></pre><p>This function sets up reserve decisions and constraints, using the reserves<em>core()` and reserves</em>contingency()` functions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d9b72ef6d96e458b3f97317ff140492c21014e6d/src/model/core/reserves.jl#L22-L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GenX.reserves_contingency-Tuple{JuMP.Model,Dict,Int64}" href="#GenX.reserves_contingency-Tuple{JuMP.Model,Dict,Int64}"><code>GenX.reserves_contingency</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">reserves_contingency(EP::Model, inputs::Dict, UCommit::Int)</code></pre><p>This function establishes several different versions of contingency reserve requirement expression, <span>$CONTINGENCY$</span> used in the reserves_core() function below.</p><p>Contingency reserves represent requirements for upward ramping capability within a specified time frame to compensated for forced outages or unplanned failures of generators or transmission lines (e.g. N-1 contingencies).</p><p>There are three options for the <span>$Contingency$</span> expression, depending on user settings: 	1. a static contingency, in which the contingency requirement is set based on a fixed value (in MW) specified in the &#39;&#39;&#39;reserves.csv&#39;&#39;&#39; input file; 	2. a dynamic contingency based on installed capacity decisions, in which the largest &#39;installed&#39; generator is used to determine the contingency requirement for all time periods; and 	3. dynamic unit commitment based contingency, in which the largest &#39;committed&#39; generator in any time period is used to determine the contingency requirement in that time period.</p><p>Note that the two dynamic contigencies are only available if unit commitment is being modeled.</p><p><strong>Static contingency</strong> Option 1 (static contingency) is expressed by the following constraint:</p><p class="math-container">\[\begin{aligned}
	Contingency = \epsilon^{contingency}
\end{aligned}\]</p><p>where <span>$\epsilon^{contingency}$</span> is static contingency requirement in MWs.</p><p><strong>Dynamic capacity-based contingency</strong> Option 2 (dynamic capacity-based contingency) is expressed by the following constraints:</p><p class="math-container">\[\begin{aligned}
	&amp;Contingency \geq \Omega^{size}_{y,z} \times \alpha^{Contingency,Aux}_{y,z} &amp; \forall y \in \mathcal{UC}, z \in \mathcal{Z}\\
	&amp;\alpha^{Contingency,Aux}_{y,z} \leq \Delta^{\text{total}}_{y,z} &amp; \forall y \in \mathcal{UC}, z \in \mathcal{Z}\\
	&amp;\alpha^{Contingency,Aux}_{y,z} \geq M_y \times \Delta^{\text{total}}_{y,z} &amp; \forall y \in \mathcal{UC}, z \in \mathcal{Z}\\
\end{aligned}\]</p><p>where <span>$M_y$</span> is a `big M&#39; constant equal to the largest possible capacity that can be installed for generation cluster <span>$y$</span>, and <span>$\alpha^{Contingency,Aux}_{y,z} \in [0,1]$</span> is a binary auxiliary variable that is forced by the second and third equations above to be 1 if the total installed capacity <span>$\Delta^{\text{total}}_{y,z} &gt; 0$</span> for any generator <span>$y \in \mathcal{UC}$</span> and zone <span>$z$</span>, and can be 0 otherwise. Note that if the user specifies contingency option 2, and is also using the linear relaxation of unit commitment constraints, the capacity size parameter for units in the set <span>$\mathcal{UC}$</span> must still be set to a discrete unit size for this contingency to work as intended.</p><p><strong>Dynamic commitment-based contingency</strong> Option 3 (dynamic commitment-based contingency) is expressed by the following set of constraints:</p><p class="math-container">\[\begin{aligned}
	&amp; Contingency \geq \Omega^{size}_{y,z} \times Contingency\_Aux_{y,z,t} &amp; \forall y \in \mathcal{UC}, z \in \mathcal{Z}\\
	&amp; Contingency\_Aux_{y,z,t} \leq \nu_{y,z,t} &amp; \forall y \in \mathcal{UC}, z \in \mathcal{Z}\\
	&amp; Contingency\_Aux_{y,z,t} \geq M_y \times \nu_{y,z,t} &amp; \forall y \in \mathcal{UC}, z \in \mathcal{Z}\\
\end{aligned}\]</p><p>where <span>$M_y$</span> is a `big M&#39; constant equal to the largest possible capacity that can be installed for generation cluster <span>$y$</span>, and <span>$Contingency\_Aux_{y,z,t} \in [0,1]$</span> is a binary auxiliary variable that is forced by the second and third equations above to be 1 if the commitment state for that generation cluster <span>$\nu_{y,z,t} &gt; 0$</span> for any generator <span>$y \in \mathcal{UC}$</span> and zone <span>$z$</span> and time period <span>$t$</span>, and can be 0 otherwise. Note that this dynamic commitment-based contingency can only be specified if discrete unit commitment decisions are used (e.g. it will not work if relaxed unit commitment is used).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d9b72ef6d96e458b3f97317ff140492c21014e6d/src/model/core/reserves.jl#L39-L85">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GenX.reserves_core-Tuple{JuMP.Model,Dict,Int64}" href="#GenX.reserves_core-Tuple{JuMP.Model,Dict,Int64}"><code>GenX.reserves_core</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">reserves_core(EP::Model, inputs::Dict, UCommit::Int)</code></pre><p>This function creates decision variables related to frequency regulation and reserves provision and constraints setting overall system requirements for regulation and operating reserves.</p><p><strong>Regulation and reserves decisions</strong> <span>$f_{y,t,z} \geq 0$</span> is the contribution of generation or storage resource <span>$y \in Y$</span> in time <span>$t \in T$</span> and zone <span>$z \in Z$</span> to frequency regulation</p><p class="math-container">\[r_{y,t,z} \geq 0\]</p><p>is the contribution of generation or storage resource <span>$y \in Y$</span> in time <span>$t \in T$</span> and zone <span>$z \in Z$</span> to operating reserves up</p><p>We assume frequency regulation is symmetric (provided in equal quantity towards both upwards and downwards regulation). To reduce computational complexity, operating reserves are only modeled in the upwards direction, as downwards reserves requirements are rarely binding in practice.</p><p>Storage resources (<span>$y \in \mathcal{O}$</span>) have two pairs of auxilary variables to reflect contributions to regulation and reserves when charging and discharging, where the primary variables (<span>$f_{y,z,t}$</span> \&amp; <span>$r_{y,z,t}$</span>) becomes equal to sum of these auxilary variables.</p><p><strong>Unmet operating reserves</strong></p><p class="math-container">\[unmet\_rsv_{t} \geq 0\]</p><p>denotes any shortfall in provision of operating reserves during each time period <span>$t \in T$</span></p><p>There is a penalty <span>$C^{rsv}$</span> added to the objective function to penalize reserve shortfalls, equal to:</p><p class="math-container">\[\begin{aligned}
	C^{rvs} = \sum_{t \in T} \omega_t \times unmet\_rsv_{t}
\end{aligned}\]</p><p><strong>Frequency regulation requirements</strong></p><p>Total requirements for frequency regulation (aka primary reserves) in each time step <span>$t$</span> are specified as fractions of hourly demand (to reflect demand forecast errors) and variable renewable avaialblity in the time step (to reflect wind and solar forecast errors).</p><p class="math-container">\[\begin{aligned}
	\sum_{y \in Y, z \in Z} f_{y,t,z} \geq \epsilon^{load}_{reg} \times \sum_{z \in Z} \mathcal{D}_{z,t} + \epsilon^{vre}_{reg} \times \sum_{z \in Z} \rho^{max}_{y,z,t} \times \Delta^{\text{total}}_{y,z} \quad \forall t \in T
\end{aligned}\]</p><p>where <span>$\mathcal{D}_{z,t}$</span> is the forecasted electricity demand in zone <span>$z$</span> at time <span>$t$</span> (before any demand flexibility); <span>$\rho^{max}_{y,z,t}$</span> is the forecasted capacity factor for variable renewable resource <span>$y \in VRE$</span> and zone <span>$z$</span> in time step <span>$t$</span>; <span>$\Delta^{\text{total}}_{y,z}$</span> is the total installed capacity of variable renewable resources <span>$y \in VRE$</span> and zone <span>$z$</span>; and <span>$\epsilon^{load}_{reg}$</span> and <span>$\epsilon^{vre}_{reg}$</span> are parameters specifying the required frequency regulation as a fraction of forecasted demand and variable renewable generation.</p><p><strong>Operating reserve requirements</strong></p><p>Total requirements for operating reserves in the upward direction (aka spinning reserves or contingency reserces or secondary reserves) in each time step <span>$t$</span> are specified as fractions of time step&#39;s demand (to reflect demand forecast errors) and variable renewable avaialblity in the time step (to reflect wind and solar forecast errors) plus the largest planning contingency (e.g. potential forced generation outage).</p><p class="math-container">\[\begin{aligned}
	\sum_{y \in Y, z \in Z} r_{y,z,t} + r^{unmet}_{t} \geq \epsilon^{load}_{rsv} \times \sum_{z \in Z} \mathcal{D}_{z,t} + \epsilon^{vre}_{rsv} \times \sum_{z \in Z} \rho^{max}_{y,z,t} \times \Delta^{\text{total}}_{y,z} + Contingency \quad \forall t \in T
\end{aligned}\]</p><p>where <span>$\mathcal{D}_{z,t}$</span> is the forecasted electricity demand in zone <span>$z$</span> at time <span>$t$</span> (before any demand flexibility); <span>$\rho^{max}_{y,z,t}$</span> is the forecasted capacity factor for variable renewable resource <span>$y \in VRE$</span> and zone <span>$z$</span> in time step <span>$t$</span>; <span>$\Delta^{\text{total}}_{y,z}$</span> is the total installed capacity of variable renewable resources <span>$y \in VRE$</span> and zone <span>$z$</span>; and <span>$\epsilon^{load}_{rsv}$</span> and <span>$\epsilon^{vre}_{rsv}$</span> are parameters specifying the required contingency reserves as a fraction of forecasted demand and variable renewable generation. <span>$Contingency$</span> is an expression defined in the reserves_contingency() function meant to represent the largest <code>N-1</code> contingency (unplanned generator outage) that the system operator must carry operating reserves to cover and depends on how the user wishes to specify contingency requirements.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d9b72ef6d96e458b3f97317ff140492c21014e6d/src/model/core/reserves.jl#L155-L203">source</a></section></article><h2 id="Transmission"><a class="docs-heading-anchor" href="#Transmission">Transmission</a><a id="Transmission-1"></a><a class="docs-heading-anchor-permalink" href="#Transmission" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GenX.transmission-Tuple{JuMP.Model,Dict,Int64,Int64}" href="#GenX.transmission-Tuple{JuMP.Model,Dict,Int64,Int64}"><code>GenX.transmission</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">function transmission(EP::Model, inputs::Dict, UCommit::Int, NetworkExpansion::Int)</code></pre><p>This function establishes decisions, expressions, and constraints related to transmission power flows between model zones and associated transmission losses (if modeled).</p><p>The function adds transmission reinforcement or construction costs to the objective function. Transmission reinforcement costs are equal to the sum across all lines of the product between the transmission reinforcement/construction cost, <span>$pi^{TCAP}_{l}$</span>, times the additional transmission capacity variable, <span>$\bigtriangleup\varphi^{max}_{l}$</span>.</p><p class="math-container">\[\begin{aligned}
&amp; \sum_{l \in \mathcal{L}}\left(\pi^{TCAP}_{l} \times \bigtriangleup\varphi^{max}_{l}\right)
\end{aligned}\]</p><p>Note that fixed O\&amp;M and replacement capital costs (depreciation) for existing transmission capacity is treated as a sunk cost and not included explicitly in the GenX objective function.</p><p>Power flow and transmission loss terms are also added to the power balance constraint for each zone:</p><p class="math-container">\[\begin{aligned}
&amp;	- \sum_{l\in \mathcal{L}}{(\varphi^{map}_{l,z} \times \Phi_{l,t})} - \frac{1}{2} \sum_{l\in \mathcal{L}}{(\varphi^{map}_{l,z} \times \beta_{l,t}(\cdot))}
\end{aligned}\]</p><p>Power flows, <span>$\Phi_{l,t}$</span>, on each line <span>$l$</span> into or out of a zone (defined by the network map <span>$\varphi^{map}_{l,z}$</span>), are considered in the demand balance equation for each zone. By definition, power flows leaving their reference zone are positive, thus the minus sign is used for this term. Losses due to power flows increase demand, and one-half of losses across a line linking two zones are attributed to each connected zone. The losses function <span>$\beta_{l,t}(\cdot)$</span> will depend on the configuration used to model losses (see below).</p><p><strong>Accounting for Transmission and Network Expansion Between Zones</strong></p><p>Transmission flow constraints are modeled using a &#39;transport method&#39;,&#39;&#39; where power flow, <span>$\Phi_{l,t}$</span>, on each line (or more likely a `path&#39; aggregating flows across multiple parallel lines) is constrained to be less than or equal to the line&#39;s maximum power transfer capacity, <span>$\varphi^{max}_{l}$</span>, plus any transmission capacity added on that line (for lines eligible for expansion in the set <span>$\mathcal{E}$</span>). The additional transmission capacity, <span>$\bigtriangleup\varphi^{max}_{l} $, is constrained by a maximum allowed reinforcement, $\overline{\bigtriangleup\varphi^{max}_{l}}$</span>, for each line <span>$l \in \mathcal{E}$</span>.</p><p class="math-container">\[\begin{aligned}
	% trasmission constraints
	&amp;-\varphi^{max}_{l} \leq  \Phi_{l,t} \leq \varphi^{max}_{l} , &amp;\quad \forall l \in (\mathcal{L} \setminus \mathcal{E} ),\forall t  \in \mathcal{T}\\
	% trasmission expansion
	&amp;-(\varphi^{max}_{l} + \bigtriangleup\varphi^{max}_{l} ) \leq  \Phi_{l,t} \leq (\varphi^{max}_{l} + \bigtriangleup\varphi^{max}_{l} ) , &amp;\quad \forall l \in \mathcal{E},\forall t  \in \mathcal{T}\\
	&amp; \bigtriangleup\varphi^{max}_{l}  \leq \overline{\bigtriangleup\varphi^{max}_{l}}, &amp;\quad \forall l \in \mathcal{E}
\end{aligned}\]</p><p><strong>Accounting for Transmission Losses</strong></p><p>Transmission losses due to power flows can be accounted for in three different ways. The first option is to neglect losses entirely, setting the value of the losses function to zero for all lines at all hours. The second option is to assume that losses are a fixed percentage, <span>$\varphi^{loss}_{l}$</span>, of the magnitude of power flow on each line, <span>$\mid \Phi_{l,t} \mid$</span> (e.g., losses are a linear function of power flows). Finally, the third option is to calculate losses, <span>$\ell_{l,t}$</span>, by approximating a quadratic-loss function of power flow across the line using a piecewise-linear function with total number of segments equal to the size of the set <span>$\mathcal{M}$</span>.</p><p class="math-container">\[\begin{aligned}
%configurable losses formulation
	&amp; \beta_{l,t}(\cdot) = \begin{cases} 0 &amp; \text{if~} \text{losses.~0} \\ \\ \varphi^{loss}_{l}\times \mid \Phi_{l,t} \mid &amp; \text{if~} \text{losses.~1} \\ \\ \ell_{l,t} &amp;\text{if~} \text{losses.~2} \end{cases}, &amp;\quad \forall l \in \mathcal{L},\forall t  \in \mathcal{T}
\end{aligned}\]</p><p>For the second option, an absolute value approximation is utilized to calculate the magnitude of the power flow on each line (reflecting the fact that negative power flows for a line linking nodes <span>$i$</span> and <span>$j$</span> represents flows from node <span>$j$</span> to <span>$i$</span> and causes the same magnitude of losses as an equal power flow from <span>$i$</span> to <span>$j$</span>). This absolute value function is linearized such that the flow in the line must be equal to the subtraction of the auxiliary variable for flow in the positive direction, <span>$\Phi^{+}_{l,t}$</span>, and the auxiliary variable for flow in the negative direction, <span>$\Phi^{+}_{l,t}$</span>, of the line. Then, the magnitude of the flow is calculated as the sum of the two auxiliary variables. The sum of positive and negative directional flows are also constrained by the maximum line flow capacity.</p><p class="math-container">\[\begin{aligned}
% trasmission losses simple
	&amp;\Phi_{l,t} =  \Phi^{+}_{l,t}  - \Phi^{-}_{l,t}, &amp;\quad \forall l \in \mathcal{L}, \forall t  \in \mathcal{T}\\
	&amp;\mid \Phi_{l,t} \mid =  \Phi^{+}_{l,t}  + \Phi^{-}_{l,t}, &amp;\quad \forall l \in \mathcal{L}, \forall t  \in \mathcal{T}\\
	&amp;\Phi^{+}_{l,t}  + \Phi^{-}_{l,t} \leq \varphi^{max}_{l}, &amp;\quad \forall l \in \mathcal{L}, \forall t  \in \mathcal{T}
\end{aligned}\]</p><p>If discrete unit commitment decisions are modeled, ``phantom losses&#39;&#39; can be observed wherein the auxiliary variables for flows in both directions (<span>$\Phi^{+}_{l,t}$</span> and <span>$\Phi^{-}_{l,t}$</span>) are both increased to produce increased losses so as to avoid cycling a thermal generator and incurring start-up costs or opportunity costs related to minimum down times. This unrealistic behavior can be eliminated via inclusion of additional constraints and a set of auxiliary binary variables, <span>$ON^{+}_{l,t} \in {0,1} \forall l \in \mathcal{L}$</span>. Then the following additional constraints are created:</p><p class="math-container">\[\begin{aligned}
	\Phi^{+}_{l,t} \leq TransON^{+}_{l,t},  &amp;\quad \forall l \in \mathcal{L}, \forall t  \in \mathcal{T}\\
	\Phi^{-}_{l,t} \leq (\varphi^{max}_{l} + \bigtriangleup\varphi^{max}_{l}) -TransON^{+}_{l,t}, &amp;\quad  \forall l \in \mathcal{L}, \forall t  \in \mathcal{T}
\end{aligned}\]</p><p>where <span>$TransON^{+}_{l,t}$</span> is a continuous variable, representing the product of the binary variable <span>$ON^{+}_{l,t}$</span> and the expression, <span>$(\varphi^{max}_{l} + \bigtriangleup\varphi^{max}_{l})$</span>. This product cannot be defined explicitly, since it will lead to a bilinear expression involving two variables. Instead, we enforce this definition via the Glover&#39;s Linearization as shown below (also referred McCormick Envelopes constraints for bilinear expressions, which is exact when one of the variables is binary).</p><p class="math-container">\[\begin{aligned}
	TransON^{+}_{l,t} \leq  (\varphi^{max}_{l} + \overline{\bigtriangleup\varphi^{max}_{l}}) \times TransON^{+}_{l,t},  &amp;\quad \forall l \in \mathcal{L}, \forall t  \in \mathcal{T} \\
	TransON^{+}_{l,t} \leq  (\varphi^{max}_{l} + \bigtriangleup\varphi^{max}_{l}),  &amp;\quad \forall l \in \mathcal{L}, \forall t  \in \mathcal{T} \\
	TransON^{+}_{l,t} \leq (\varphi^{max}_{l} + \bigtriangleup\varphi^{max}_{l}) - (\varphi^{max}_{l} + \overline{\bigtriangleup\varphi^{max}_{l}}) \times(1- TransON^{+}_{l,t}),  &amp;\quad \forall l \in \mathcal{L}, \forall t  \in \mathcal{T} \\
\end{aligned}\]</p><p>These constraints permit only the positive or negative auxiliary flow variables to be non-zero at a given time period, not both.</p><p>For the third option, losses are calculated as a piecewise-linear approximation of a quadratic function of power flows. In order to do this, we represent the absolute value of the line flow variable by the sum of positive stepwise flow variables <span>$(\mathcal{S}^{+}_{m,l,t}, \mathcal{S}^{-}_{m,l,t})$</span>, associated with each partition of line losses computed using the corresponding linear expressions. This can be understood as a segmentwise linear fitting (or first order approximation) of the quadratic losses function. The first constraint below computes the losses a the accumulated sum of losses for each linear stepwise segment of the approximated quadratic function, including both positive domain and negative domain segments. A second constraint ensures that the stepwise variables do not exceed the maximum size per segment. The slope and maximum size for each segment are calculated as per the method in \cite{Zhang2013}.</p><p class="math-container">\[\begin{aligned}
	&amp; \ell_{l,t} = \frac{\varphi^{ohm}_{l}}{(\varphi^{volt}_{l})^2}\bigg( \sum_{m \in \mathcal{M}}( S^{+}_{m,l}\times \mathcal{S}^{+}_{m,l,t} + S^{-}_{m,l}\times \mathcal{S}^{-}_{m,l,t}) \bigg), &amp;\quad \forall l \in \mathcal{L}, \forall t  \in \mathcal{T} \\
	&amp; \text{\quad Where:} \\
	&amp; \quad S^{+}_{m,l} = \frac{2+4 \times \sqrt{2}\times (m-1)}{1+\sqrt{2} \times (2 \times M-1)} (\varphi^{max}_{l} + \overline{\bigtriangleup\varphi^{max}_{l}}) &amp;\quad \forall m \in [1 \colon M], l \in \mathcal{L}  \\
	&amp; \quad S^{-}_{m,l} = \frac{2+4 \times \sqrt{2}\times (m-1)}{1+\sqrt{2} \times (2 \times M-1)} (\varphi^{max}_{l} + \overline{\bigtriangleup\varphi^{max}_{l}}) &amp;\quad \forall m \in [1 \colon M], l \in \mathcal{L}\\
	&amp; \\
	&amp; \mathcal{S}^{+}_{m,l,t}, \mathcal{S}^{-}_{m,l,t} &lt;= \overline{\mathcal{S}_{m,l}} &amp;\quad \forall m \in [1:M], l \in \mathcal{L}, t \in \mathcal{T} \\
	&amp; \text{\quad Where:} \\
	&amp; \quad \overline{S_{l,z}} =  \begin{cases} \frac{(1+\sqrt{2})}{1+\sqrt{2} \times (2 \times M-1)}  (\varphi^{max}_{l} + \overline{\bigtriangleup\varphi^{max}_{l}}) &amp; \text{if~} m = 1 \\
	\frac{2 \times \sqrt{2} }{1+\sqrt{2} \times (2 \times M-1)} (\varphi^{max}_{l} + \overline{\bigtriangleup\varphi^{max}_{l}}) &amp; \text{if~} m &gt; 1 \end{cases}
\end{aligned}\]</p><p>Next, a constraint ensures that the sum of auxiliary segment variables (<span>$m \geq 1$</span>) minus the &quot;zero&quot; segment (which allows values to go into the negative domain) from both positive and negative domains must total the actual power flow across the line, and a constraint ensures that the sum of negative and positive flows do not exceed the maximum flow for the line.</p><p class="math-container">\[\begin{aligned}
	&amp;\sum_{m \in [1:M]} (\mathcal{S}^{+}_{m,l,t}) - \mathcal{S}^{+}_{0,l,t} =  \Phi_{l,t}, &amp;\quad \forall l \in \mathcal{L}, \forall t  \in \mathcal{T}\\
	&amp;\sum_{m \in [1:M]} (\mathcal{S}^{-}_{m,l,t}) - \mathcal{S}^{-}_{0,l,t}  =  - \Phi_{l,t}
\end{aligned}\]</p><p>As with losses option 2, this segment-wise approximation of a quadratic loss function also permits &#39;phantom losses&#39; to avoid cycling thermal units when discrete unit commitment decisions are modeled. In this case, the additional constraints below are also added to ensure that auxiliary segments variables do not exceed maximum value per segment and that they are filled in order; i.e., one segment cannot be non-zero unless prior segment is at its maximum value. Binary constraints deal with absolute value of power flow on each line. If the flow is positive, <span>$\mathcal{S}^{+}_{0,l,t}$</span> must be zero; if flow is negative, <span>$\mathcal{S}^{+}_{0,l,t}$</span> must be positive and takes on value of the full negative flow, forcing all <span>$\mathcal{S}^{+}_{m,l,t}$</span> other segments (<span>$m \geq 1$</span>) to be zero. Conversely, if the flow is negative, <span>$\mathcal{S}^{-}_{0,l,t}$</span> must be zero; if flow is positive, <span>$\mathcal{S}^{-}_{0,l,t}$</span> must be positive and takes on value of the full positive flow, forcing all <span>$\mathcal{S}^{-}_{m,l,t}$</span> other segments (<span>$m \geq 1$</span>) to be zero. Requiring segments to fill in sequential order and binary variables to ensure variables reflect the actual direction of power flows are both necessary to eliminate ``phantom losses&#39;&#39; from the solution. These constraints and binary decisions are ommited if the model is fully linear.</p><p class="math-container">\[\begin{aligned}
	&amp;\mathcal{S}^{+}_{m,l,t} &lt;=    \overline{\mathcal{S}_{m,l}} \times ON^{+}_{m,l,t}, &amp;\quad \forall m \in [1:M], \forall l \in \mathcal{L}, \forall t  \in \mathcal{T}\\
	&amp;\mathcal{S}^{-}_{m,l,t} &lt;=    \overline{\mathcal{S}_{m,l}} \times ON^{-}_{m,l,t},  &amp;\quad \forall m \in[1:M], \forall l \in \mathcal{L}, \forall t  \in \mathcal{T}\\
	&amp;\mathcal{S}^{+}_{m,l,t} \geq ON^{+}_{m+1,l,t} \times \overline{\mathcal{S}_{m,l}}, &amp;\quad \forall m \in [1:M], \forall l \in \mathcal{L}, \forall t  \in \mathcal{T}\\
	&amp;\mathcal{S}^{-}_{m,l,t} \geq ON^{-}_{m+1,l,t} \times \overline{\mathcal{S}_{m,l}} , &amp;\quad \forall m \in [1:M], \forall l \in \mathcal{L}, \forall t  \in \mathcal{T}\\
	&amp;\mathcal{S}^{+}_{0,l,t} \leq \varphi^{max}_{l} \times (1- ON^{+}_{1,l,t}), &amp;\quad \forall l \in \mathcal{L}, \forall t  \in \mathcal{T}\\
	&amp;\mathcal{S}^{-}_{0,l,t} \leq \varphi^{max}_{l} \times (1- ON^{-}_{1,l,t}), &amp;\quad \forall l \in \mathcal{L}, \forall t  \in \mathcal{T}
\end{aligned}\]</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d9b72ef6d96e458b3f97317ff140492c21014e6d/src/model/core/transmission.jl#L17-L130">source</a></section></article><h2 id="Unit-Commitment"><a class="docs-heading-anchor" href="#Unit-Commitment">Unit Commitment</a><a id="Unit-Commitment-1"></a><a class="docs-heading-anchor-permalink" href="#Unit-Commitment" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GenX.ucommit-Tuple{JuMP.Model,Dict,Int64}" href="#GenX.ucommit-Tuple{JuMP.Model,Dict,Int64}"><code>GenX.ucommit</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">ucommit(EP::Model, inputs::Dict, UCommit::Int)</code></pre><p>This function creates decision variables and cost expressions associated with thermal plant unit commitment or start-up and shut-down decisions (cycling on/off)</p><p><strong>Unit commitment decision variables:</strong></p><p>This function defines the following decision variables:</p><p class="math-container">\[\nu_{y,t,z}\]</p><p>designates the commitment state of generator cluster <span>$y$</span> in zone <span>$z$</span> at time <span>$t$</span>; <span>$\chi_{y,t,z}$</span> represents number of startup decisions in cluster <span>$y$</span> in zone <span>$z$</span> at time <span>$t$</span>; <span>$\zeta_{y,t,z}$</span> represents number of shutdown decisions in cluster <span>$y$</span> in zone <span>$z$</span> at time <span>$t$</span>.</p><p><strong>Cost expressions:</strong></p><p>The total cost of start-ups across all generators subject to unit commitment (<span>$y \in UC$</span>) and all time periods, t is expressed as:</p><p class="math-container">\[\begin{aligned}
	C^{start} = \sum_{y \in UC, t \in T} \omega_t \times start\_cost_{y} \times \chi_{y,t}
\end{aligned}\]</p><p>The sum of start-up costs is added to the objective function.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/GenXProject/GenX/blob/d9b72ef6d96e458b3f97317ff140492c21014e6d/src/model/core/ucommit.jl#L17-L40">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../power_balance/">« Power Balance</a><a class="docs-footer-nextpage" href="../curtailable_variable_renewable/">Curtailable Variable Renewable »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Wednesday 5 January 2022 03:40">Wednesday 5 January 2022</span>. Using Julia version 1.5.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
